<div class="row">
  <div class="col-lg-12">
    <h1 class="page-header"><i class="fa fa-list-ol fa-fw"></i> User Details</h1>
  </div>
</div>

<div class="row">
  <div class="col-sm-12">

    <div class="panel panel-default">

      <div class="panel-body">

        <form (ngSubmit)="save()" #userForm="ngForm">

          <div class="form-group">
            <label>Employee</label>
            <select class="form-control" required [(ngModel)]="userPerson" id="person" name="person"
                    #person="ngModel" (ngModelChange)="setUsername($event)">
              <option *ngFor="let person of persons | filterPersonType: EMPLOYEE" [ngValue]="person">{{person.firstName}} {{person.lastName}}</option>
            </select>
            <div [hidden]="person.valid || person.pristine" class="alert alert-danger">
              Employee to link the user is needed.
            </div>
          </div>

          <div class="form-group">
            <label>Username</label>
            <input type="text" class="form-control" required [(ngModel)]="user.username" #username="ngModel" id="username"
                   name="username" readonly>
            <div [hidden]="!userExists" class="alert alert-danger">
              User already exists.
            </div>
          </div>

          <a class="btn btn-default" [routerLink]="['/users']">Cancel</a>
          <button type="submit" class="btn btn-primary pull-right" [disabled]="!userForm.form.valid">Save</button>

        </form>

      </div>
    </div>

  </div>
</div>